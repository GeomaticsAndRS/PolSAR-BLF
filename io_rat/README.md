# Conversion tools between rat and cimg formats

## Installation

- Edit the `makefile` according to your operating system.
	- On linux: simply change `CXX = g++`
	- On Mac OS X it will depend to the compilator. Using the one given by XCode, you will need to remove the `open_mp` flag: uncomment `CIMG_OPENMP_CFLAGS = ` and comment `CIMG_OPENMP_CFLAGS = -Dcimg_use_openmp -fopenmp`. If you want to use openmp, you'll need to install the gcc provided by the gcc fundation. See hpc.sourceforge.net for more information. The makefile provided here use the gcc downloaded in the previous website. 

- Type in `make` and it should create 2 binary files: `import_rat` and `export_rat`.

## Usage

- To display help and default parameter values, simply type:

`./import_rat -h` or `./export_rat -h`

- Here is the standard procedure to filter a polarimetric data using `RAT` and `PolSAR-BLF`:
	- Using `RAT`:
		- use `File > construct PolSAR vector`
		- use `PolSAR > Calibration > Cross-talk (Ainsworth)`
		- use `PolSAR > Cross-polar symmetrisation` is 4 element vector
		- use `PolSAR > Decomposition > Pauli decomposition` to obtain a Pauli scattering vector
		- use `PolSAR > Transform > Vector -> Matrix` to obtain the covariance matrix. At this stage it is important to perform a presumming of at least 2x2.
		- save the rat file using the `save` button or `File > Save RAT file`.
	- Using the console / terminal
		- transform the rat file into a cimg file using `import_rat`
			- `import_rat -i foo.rat -o foo.cimg` for a coherency matrix
			- `import_rat -i foo.rat -o foo.cimg -lex` for a covariance matrix
		- use `PolSAR-BLF` as explain in the readme file
		- transform the cimg file generated by `PolSAR-BLF` into a rat format
			- `export_rat -i foo.cimg -o foo.rat -c2Dmat` for a coherency matrix 
			- `export_rat -i foo.cimg -o foo.rat -c2Dlex` for a covariance matrix
		- Now you can open the `foo.rat` file using the RAT software.



